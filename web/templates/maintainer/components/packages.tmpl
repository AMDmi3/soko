{{define "packages"}}
    <div class="row">
        <div class="col-md-9">
            {{if .Packages}}
                <ul class="list-group">
                    {{$category := ""}}

                            {{ range .Packages }}
                            {{ if eq .Category $category}}
                                <li class="list-group-item">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <a href="/packages/{{.Atom}}" class="text-dark"><b>{{.Atom}}</b></a>
                                        </div>
                                        <div class="col-md-8 text-muted">
                                            {{.Description}}
                                        </div>
                                    </div>
                                </li>
                                {{$category = .Category}}
                            {{else}}
                                    </ul>
                                    <h3 id="{{.Category}}" class="{{if ne $category ""}}mt-4{{end}}">
                                        {{$category = .Category}}
                                        {{$category}}
                                    </h3>
                                    <ul class="list-group">
                                        <li class="list-group-item">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <a href="/packages/{{.Atom}}" class="text-dark"><b>{{.Atom}}</b></a>
                                                </div>
                                                <div class="col-md-8 text-muted">
                                                    {{.Description}}
                                                </div>
                                            </div>
                                        </li>
                            {{end}}
                        {{end}}



                </ul>

            {{else}}
                <div class="row">
                    <div class="col-md-8">
                    </div>
                    <div class="col-md-4">
                        <img style="width: 100%;" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Larry-the-cow-full.svg/1200px-Larry-the-cow-full.svg.png"/>
                    </div>
                </div>
            {{end}}
        </div>
        <div class="col-md-3 pt-4">
            <h4 class="">
                <a class="collapseLink" style="color:#000000;" data-toggle="collapse" href="#collapseDescription" role="button" aria-expanded="false" aria-controls="collapseDescription">
                    Description
                </a>
            </h4>
            <div class="collapse show" id="collapseDescription">
                <span class="text-muted">
                    All packages maintained by {{.Maintainer.Name}}. That is, {{.Maintainer.Name}} is mentioned as maintainer of the project in the <a href="https://devmanual.gentoo.org/ebuild-writing/misc-files/metadata/">metadata.xml</a> file
                </span>
            </div>
            <h4 class="mt-4">
                <a class="collapseLink" style="color:#000000;" data-toggle="collapse" href="#collapseShortcuts" role="button" aria-expanded="false" aria-controls="collapseShortcuts">
                    Shortcuts
                </a>
            </h4>
            <div class="collapse show" id="collapseShortcuts">
                <dl>
                    {{$category := (index .Packages 0).Category}}
                    {{$packageCounter := 0}}
                    {{ range .Packages }}
                        {{ if ne .Category $category}}
                            <dd class="ml-3 mb-0"><a href="#{{$category}}">{{$category}} ({{$packageCounter}})</a></dd>
                            {{$category = .Category}}
                            {{$packageCounter = 1}}
                        {{else}}
                            {{$packageCounter = add $packageCounter 1}}
                        {{end}}
                    {{end}}
                    <dd class="ml-3 mb-0"><a href="#{{$category}}">{{$category}} ({{$packageCounter}})</a></dd>
                </dl>
            </div>
        </div>
    </div>
{{end}}

